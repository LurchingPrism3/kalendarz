<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Kalendarz i Zegar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        table {
            margin: auto;
            border-collapse: collapse;
        }
        td, th {
            padding: 5px;
            border: 1px solid black;
            text-align: center;
        }
        .dzisiaj {
            background-color: yellow;
        }
    </style>
</head>
<body>
    <h2 id="zegar"></h2>
    <button onclick="zmienMiesiac(-1)">◀ Poprzedni</button>
    <button onclick="zmienMiesiac(1)">Następny ▶</button>
    <div id="kalendarz"></div>

    <script>
        let rok = new Date().getFullYear();
        let miesiac = new Date().getMonth();

        function aktualizujZegar() {
            document.getElementById("zegar").innerText = new Date().toLocaleTimeString();
        }

        function wyswietlKalendarz() {
            const dniWMiesiacu = [31, (rok % 4 === 0 && (rok % 100 !== 0 || rok % 400 === 0)) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            const nazwyMiesiecy = ["Styczen", "Luty", "Marzec", "Kwiecien", "Maj", "Czerwiec", "Lipiec", "Sierpien", "Wrzesien", "Pazdziernik", "Listopad", "Grudzien"];

            let pierwszyDzien = new Date(rok, miesiac, 1).getDay();
            let dzis = new Date();

            let wynik = `<h3>${nazwyMiesiecy[miesiac]} ${rok}</h3><table><tr><th>Pn</th><th>Wt</th><th>Śr</th><th>Cz</th><th>Pt</th><th>So</th><th>Nd</th></tr><tr>`;
            let startOffset = (pierwszyDzien === 0 ? 6 : pierwszyDzien - 1);

            for (let i = 0; i < startOffset; i++) wynik += "<td></td>";
            for (let d = 1; d <= dniWMiesiacu[miesiac]; d++) {
                if ((startOffset + d - 1) % 7 === 0 && d !== 1) wynik += "</tr><tr>";
                wynik += `<td class="${(d === dzis.getDate() && miesiac === dzis.getMonth() && rok === dzis.getFullYear()) ? 'dzisiaj' : ''}">${d}</td>`;
            }
            wynik += "</tr></table>";
            document.getElementById("kalendarz").innerHTML = wynik;
        }

        function zmienMiesiac(kierunek) {
            miesiac += kierunek;
            if (miesiac < 0) { miesiac = 11; rok--; }
            if (miesiac > 11) { miesiac = 0; rok++; }
            wyswietlKalendarz();
        }

        setInterval(aktualizujZegar, 1000);
        aktualizujZegar();
        wyswietlKalendarz();
    </script>
</body>
</html>
